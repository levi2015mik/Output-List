(this.webpackJsonpasync=this.webpackJsonpasync||[]).push([[0],{25:function(e,t,a){e.exports=a(56)},56:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(5),o=a(3),c=a(6),l=a(22),p=a(23),i=a(1),m=a(4),u=a.n(m),E=a(10),d=a(24),h=a.n(d);const b=function(){var e=Object(E.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(e=>setTimeout(e,t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=()=>function(){var e=Object(E.a)(u.a.mark((function e(t,a){var r,n,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a().persons,n="".concat("http://www.filltext.com/?id=%7Bnumber%7C1000%7D&firstName=%7BfirstName%7D&lastName=%7BlastName%7D&email=%7Bemail%7D&phone=%7Bphone%7C(xxx)xxx-xx-xx%7D&message=%7Blorem%7C32%7D&timestamp={date}&delay=3","&rows=").concat(r.nItems),r.httpError&&(n+="&err=".concat(r.httpError)),t(y()),e.prev=4,e.next=7,h.a.get(n);case 7:s=e.sent,t(v(s.data)),t(g()),t(w()),e.next=22;break;case 13:return e.prev=13,e.t0=e.catch(4),t(w()),o={message:e.t0.message},t(D(o)),e.next=20,b(5e3);case 20:"Network Error"===e.t0.message&&t(O()),t(f());case 22:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t,a){return e.apply(this,arguments)}}(),v=e=>({type:"ADD_ITEMS",payload:e}),y=()=>({type:"SET_LOADER",payload:!0}),w=()=>({type:"SET_LOADER",payload:!1}),g=()=>({type:"ADD_SORTED_ITEMS"}),D=e=>({type:"ADD_ERROR",payload:e}),f=()=>({type:"DELETE_ERROR"});var T=Object(o.combineReducers)({persons:(e={list:[],sort:0,nItems:10,loader:0,sortList:[]},t)=>{switch(t.type){case"ADD_ITEMS":return Object(i.a)(Object(i.a)({},e),{},{list:t.payload});case"ADD_SORTED_ITEMS":{let t;switch(e.sort){case 0:t=e.list;break;case 1:t=e.list.sort((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime());break;case 2:t=e.list.sort((e,t)=>-1*(new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()))}return Object(i.a)(Object(i.a)({},e),{},{sortList:t})}case"SET_SORT":{let t;switch(e.sort){case 0:t=1;break;case 1:t=2;break;case 2:t=1}return Object(i.a)(Object(i.a)({},e),{},{sort:t})}case"SET_ITEMS_PP":return Object(i.a)(Object(i.a)({},e),{},{nItems:t.payload});case"SET_LOADER":return Object(i.a)(Object(i.a)({},e),{},{loader:t.payload});case"ADD_ERROR":return Object(i.a)(Object(i.a)({},e),{},{error:t.payload});case"DELETE_ERROR":{let t=Object(i.a)({},e);return delete t.error,t}case"CREATE_HTTP_ERROR":return Object(i.a)(Object(i.a)({},e),{},{httpError:t.payload});default:return e}}});function j(e){return n.a.createElement("div",{className:"rules"},n.a.createElement("div",null,"Output of:",n.a.createElement("select",{value:e.nItems,onChange:e.onChange},n.a.createElement("option",{value:1},"1"),n.a.createElement("option",{value:5},"5"),n.a.createElement("option",{value:10},"10"),n.a.createElement("option",{value:20},"20"),n.a.createElement("option",{value:50},"50"),n.a.createElement("option",{value:100},"100"),n.a.createElement("option",{value:500},"500"))),n.a.createElement("div",null,"sort by: timestamp ",n.a.createElement("button",{onClick:e.onSort},n.a.createElement("img",{src:["icons8-sort.png","icons8-sort-to-up.png","icons8-sort-to-down.png"][e.sort],alt:"sort"}))),n.a.createElement("div",null,n.a.createElement("label",null,"Generate error query ",n.a.createElement("input",{onChange:e.createError,type:"checkbox"}))))}var R=a(7);function _(e){const t=Object(r.useState)(!1),a=Object(R.a)(t,2),s=a[0],o=a[1],c=new Date(e.person.timestamp).toLocaleString();return n.a.createElement("div",{className:"el",onMouseOver:()=>o(!0),onMouseOut:()=>o(!1)},n.a.createElement("h3",null,e.person.firstName," ",e.person.lastName),n.a.createElement("p",null,e.person.message),s&&n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement("span",null,"Phone:")," ",e.person.phone),n.a.createElement("li",null,n.a.createElement("span",null,"Email:")," ",e.person.email)),n.a.createElement("time",null,c),n.a.createElement("hr",null))}function S(e){const t=()=>window.pageYOffset+window.innerHeight<document.body.scrollHeight-100,a=Object(r.useState)(t()),s=Object(R.a)(a,2),o=s[0],c=s[1],l=()=>c(t());return Object(r.useEffect)(()=>(c(t()),window.addEventListener("scroll",l),()=>window.removeEventListener("scroll",l)),[e.persons]),n.a.createElement("div",{className:"list"},o&&n.a.createElement("div",{className:"btn-to-last"},n.a.createElement("button",{onClick:function(){window.scroll(0,document.documentElement.scrollHeight)}},n.a.createElement("img",{src:"down.png",alt:"last"}))),e.persons.map((e,t)=>n.a.createElement(_,{key:t,person:e})))}function x(e){return n.a.createElement("div",{style:{display:e.status?"block":"none"},className:"loader__wrapper"},n.a.createElement("div",null,n.a.createElement("img",{src:"loader.png",alt:"load"})))}function k(e){return n.a.createElement("div",{className:"error__wrapper",style:{display:e.error?"block":"none"}},n.a.createElement("div",null,n.a.createElement("img",{src:"err.png",alt:"Error!"}),n.a.createElement("p",null,e.error&&e.error.message)))}class I extends r.Component{componentDidMount(){this.props.dispatch(O())}componentDidUpdate(e){}reload(e){this.props.dispatch({type:"SET_ITEMS_PP",payload:e.target.value}),this.props.dispatch(O())}sort(){this.props.dispatch(e=>{e({type:"SET_SORT"}),e(g())})}createError(e){let t=0;e.target.checked&&(t=function(e,t){let a=e-.5+Math.random()*(t-e+1);return Math.round(a)}(400,700)),this.props.dispatch({type:"CREATE_HTTP_ERROR",payload:t}),this.props.dispatch(O())}render(){return n.a.createElement("div",null,n.a.createElement(j,{nItems:this.props.persons.nItems,sort:this.props.persons.sort,onChange:this.reload.bind(this),onSort:this.sort.bind(this),createError:this.createError.bind(this)}),n.a.createElement(S,{persons:this.props.persons.sortList}),n.a.createElement(x,{status:this.props.persons.loader}),n.a.createElement(k,{error:this.props.persons.error}),n.a.createElement("footer",null,"\u0438\u043a\u043e\u043d\u043a\u0438 \u043e\u0442 ",n.a.createElement("a",{target:"_blank",href:"https://icons8.ru"},"Icons8")))}}var N=Object(c.b)(e=>({persons:e.persons}))(I);const C=[l.a],M=Object(o.createStore)(T,Object(p.composeWithDevTools)(Object(o.applyMiddleware)(...C)));Object(s.render)(n.a.createElement(c.a,{store:M},n.a.createElement(N,null)),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.5895914a.chunk.js.map